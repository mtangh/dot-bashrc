---
# tests role tasks file
# vim: set ff=unix ts=2 sw=2 sts=2 et : This line is VIM modeline

- block:

  - name: "{{ tests_casename|d('noname',true) }} | Include '{{ _tests_tasks_file|d('???') }}'."
    include_tasks:
      file: "{{ _tests_tasks_file }}"
    when: _tests_tasks_file|d(none) is not none
    no_log: "{{ _tests_tasks_file|d(none) is none }}"

  when: tests_run|d(false,true)
        and tests_task|d(none,true) is string
        and tests_task|trim|lower|match('^(setup|teardown)$')
  vars:
    _tests_tasks_file: "{{
      'tests-%s.yml'|format(tests_task|trim|lower)
      if tests_task|d(none,true) is string
      and tests_task|trim|lower|match('^(setup|teardown)$') else
      none }}"

