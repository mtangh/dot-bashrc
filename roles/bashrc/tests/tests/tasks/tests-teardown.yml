---
# tests/teardown tasks file
# vim: set ff=unix ts=2 sw=2 sts=2 et : This line is VIM modeline

- block:

  - name: "{{ tests_casename|d('noname',true) }} | tests-teardown | Include vars."
    include_vars:
      file: "{{ _t_vars_file }}"
    with_flattened: "{{ tests_vars_teardown_file_list|d([],true) }}"
    loop_control:
      loop_var: _t_vars_file
    when: tests_vars_teardown_file_list|d([],true)|length > 0
          and _t_vars_file|d('',true)|is_file == true

  - name: "{{ tests_casename|d('noname',true) }} | tests-teardown | Task for case."
    include_tasks:
      file: "{{ _t_tasks_teardown_file }}"
    with_flattened: "{{ tests_tasks_teardown_file_list|d([],true) }}"
    loop_control:
      loop_var: _t_tasks_teardown_file
    when: tests_tasks_teardown_file_list|d([],true)|length > 0
          and _t_tasks_teardown_file|d('',true)|is_file == true
    no_log: "{{ tests_tasks_teardown_file_list|d([],true)|length <= 0 }}"

  when: tests_run|d(false,true)
        and tests_casename|d('',true)|string|trim|length > 0
        and tests_prefix_dir|d('',true)|string|trim|length > 0
  tags:
  - 'tests/teardown'

